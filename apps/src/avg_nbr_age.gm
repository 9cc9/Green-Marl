//--------------------------------------
// The example used in GPS paper
//--------------------------------------
Procedure agv_nbr_age(
        G: Graph, 
        age: N_P<Int>(G),
        avg_age: N_P<Float>(G),
        K: Int) : Float
{
    Foreach(n: G.Nodes) {
      n.avg_age = Avg(t:n.InNbrs) {t.age};
    }

    Float avg = (Float) Avg(n: G.Nodes)(n.InDegree() > K){n.avg_age};
    Return avg;
}
