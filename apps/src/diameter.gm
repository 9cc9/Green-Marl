Procedure diameter(G : Graph) : Int {

	Node_Property<Int>(G) localDiameter;
	Foreach(node : G.Nodes) {
		Node_Property<Int>(G) distance;
		G.distance = INF;
		InBFS(c : G.Nodes From node) {
			Int bla = Count(n : c.UpNbrs);
//			[printf("asdasd: %d\n", bla)];
			c.distance = Count(n : c.UpNbrs);
		}
		node.localDiameter = Max(n : G.Nodes) (n.distance != INF) { n.distance };
	}
	
	Return Max(n : G.Nodes) { n.localDiameter };
}
